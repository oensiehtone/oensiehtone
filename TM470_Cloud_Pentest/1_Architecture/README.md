# 1. Architecture

This section provides an overview of the virtual environment created to support the MiTC attack simulation.  
The goal was to build an isolated, fully controlled cloud environment where identity management, cloud storage, client behaviour, and monitoring could be observed.

---

## 1.1 Overview and Purpose

The environment replicated a small enterprise-style cloud deployment for attack simulation and defensive evaluation. It consisted of:

- **Proxmox VE** – hosting all virtual machines  
- **Zentyal Server** – Microsoft-compatible directory services and IAM  
- **Nextcloud Server** – cloud storage platform using token-based authentication  
- **Windows 10 Client** – synced files with Nextcloud and generated authentication tokens  
- **Kali Linux** – attacker VM for scanning, SMB abuse, and token capture  
- **Snort IDS/IPS** – monitored network traffic and provided alerting for defensive evaluation

*(Client/server sync token paths are shown in the diagram.)*

---

## 1.2 Network Design

A simplified internal network was implemented:

- One internal subnet for all virtual machines  
- Static addressing where required  
- Firewall restrictions applied within Proxmox  
- Communication allowed only between services essential for identity, file sync, and attack testing  

This controlled layout reduced noise, made enumeration clearer, and ensured only relevant services were exposed.

---

## 1.3 Architecture Diagram

<img width="1280" height="720" alt="Network Addressing Scheme" src="https://github.com/user-attachments/assets/7416aa4c-e708-435c-a46b-cf4fb5c9f576" />

---

## 1.4 Architecture Decisions

This architecture was chosen because it:

- Enabled realistic simulation of cloud storage workflows  
- Allowed control over IAM and cloud layers  
- Provided visibility of token behaviour  
- Supported MiTC attack replication and defensive evaluation

---

## 1.5 Limitations

- VirtualBox caused early networking issues; Proxmox provided better isolation  
- Resource constraints limited additional services (e.g., extra monitoring tools)

---

*This architecture forms the foundation for the MITC simulation and penetration testing stages.*

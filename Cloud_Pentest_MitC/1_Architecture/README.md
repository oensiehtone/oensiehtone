# 1. Architecture

This section provides an overview of the virtual environment created to support the MitC attack simulation.
The goal was to build an isolated, fully controlled cloud environment where identity management, cloud storage, client behaviour, and monitoring could be observed.

---

## 1.1 Overview and Purpose

The environment replicated a small enterprise-style cloud deployment for both offensive testing and defensive evaluation:

- **Proxmox VE** – hosting all virtual machines.
- **Zentyal Server** – Microsoft-compatible directory services and IAM.
- **Nextcloud Server** – cloud storage platform using token-based authentication.
- **Windows 10 Client** – synced with Nextcloud and generated authentication tokens.  
- **Kali Linux** – attacker VM used for scanning, SMB exploitation, and token capture.  
- **Snort IDS/IPS** – monitored traffic and provided detection capability.  

(Client/server sync token flows are shown in the Architecture Diagram).

---

## 1.2 Network Design

A simplified internal network was implemented:

- One internal subnet for all virtual machines.  
- Static addressing where required.  
- Proxmox-level firewall rules.  
- Communication restricted to essential services.  

This design reduced traffic noise, improved clarity during enumeration, and ensured only relevant services were exposed.

---

## 1.3 Architecture Diagram

<img width="1280" height="720" alt="Network Addressing Scheme" src="https://github.com/user-attachments/assets/32b2b7f9-0199-4a73-8212-c3cf121334a8" />

---

## 1.4 Architecture Decisions

This architecture was chosen because it:

- Enabled realistic simulation of cloud storage workflows.
- Allowed full control over IAM and cloud layers.
- Provided visibility of token behaviour and storage.
- Supported MitC attack replication and defensive evaluation.

---

## 1.5 Limitations

- VirtualBox caused networking issues during initial testing.
- Proxmox provided better isolation but required more configuration.
- Resource constraints limited additional services (e.g., SIEM, further monitoring tools).

---
